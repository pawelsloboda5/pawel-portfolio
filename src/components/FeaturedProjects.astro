---
// Featured Projects Section - Large showcase projects
import ScrollReveal from './ScrollReveal';
import { featuredProjects } from '../data/featuredProjects';
---

<ul class="list-none p-0 m-0">
  {featuredProjects.map((project, index) => {
    // Alternate between odd (0, 2, 4...) and even (1, 3, 5...) layouts
    const isOdd = index % 2 === 0;
    const layoutClass = isOdd ? 'featured-project-odd' : 'featured-project-even';
    
    return (
      <ScrollReveal client:load variant="slide-up" duration={600} threshold={0.1} delay={100} distance={30}>
        <li class={`featured-project ${layoutClass}`}>
          <!-- Project Content -->
          <div class="project-content">
            <p class="project-overline">Featured Project</p>
            <h3 class="project-title">
              <a href={project.liveUrl} target="_blank" rel="noopener noreferrer">
                {project.title}
              </a>
            </h3>
            
            <div class="project-description">
              <p set:html={project.description} />
            </div>

            <ul class="project-tech-list">
              {project.techStack.map(tech => (
                <li>{tech}</li>
              ))}
            </ul>

            <div class="project-links">
              {project.githubUrl && (
                <a href={project.githubUrl} target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
                </a>
              )}
              <a href={project.liveUrl} target="_blank" rel="noopener noreferrer" aria-label="External link" class="external">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
              </a>
            </div>
          </div>

          <!-- Project Image -->
          <div class="project-image">
            <a href={project.liveUrl} target="_blank" rel="noopener noreferrer">
              <div class="img-wrapper">
                {project.imageUrl ? (
                  <img 
                    src={project.imageUrl} 
                    alt={project.title} 
                    class="img aspect-video"
                    loading="eager"
                    decoding="async"
                  />
                ) : project.imageGradient ? (
                  <div class={`img aspect-video bg-gradient-to-br`} style={`background: linear-gradient(to bottom right, ${project.imageGradient.from}, ${project.imageGradient.to});`}></div>
                ) : (
                  <div class="img aspect-video bg-gradient-to-br from-[var(--color-accent-primary)] to-[var(--color-bg-tertiary)]"></div>
                )}
              </div>
            </a>
          </div>
        </li>
      </ScrollReveal>
    );
  })}
</ul>

<style>
  /* Reset list styles */
  ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  /* Featured Projects Styles */
  .featured-project {
    position: relative;
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 20px;
    align-items: center;
    margin-bottom: 120px;
    padding: 0;
  }

  ul > :last-child .featured-project {
    margin-bottom: 0;
  }

  /* Odd Projects: Image Left, Content Right */
  .featured-project-odd .project-content {
    grid-column: 7 / -1;
    text-align: right;
  }

  .featured-project-odd .project-image {
    grid-column: 1 / 8;
    grid-row: 1 / -1;
  }

  .featured-project-odd .project-tech-list {
    justify-content: flex-end;
    text-align: right;
    margin-left: auto;
    margin-right: 0;
  }

  .featured-project-odd .project-tech-list li {
    margin: 0 0 5px 20px;
  }

  .featured-project-odd .project-links {
    justify-content: flex-end;
    margin-left: 0;
    margin-right: -10px;
  }

  /* Even Projects: Content Left, Image Right */
  .featured-project-even .project-content {
    grid-column: 1 / 7;
    text-align: left;
  }

  .featured-project-even .project-image {
    grid-column: 6 / -1;
    grid-row: 1 / -1;
  }

  .featured-project-even .project-tech-list {
    justify-content: flex-start;
  }

  .featured-project-even .project-tech-list li {
    margin: 0 20px 5px 0;
  }

  .featured-project-even .project-links {
    justify-content: flex-start;
    margin-left: -10px;
    margin-right: 0;
  }

  /* Project Content */
  .project-content {
    position: relative;
    grid-row: 1 / -1;
    z-index: 2;
  }

  .project-overline {
    margin: 10px 0;
    color: var(--color-accent-primary);
    font-family: var(--font-mono);
    font-size: 13px;
    font-weight: 400;
  }

  .project-title {
    color: var(--color-text-primary);
    font-size: clamp(24px, 5vw, 28px);
    font-weight: 600;
    line-height: 1.1;
    margin: 0 0 20px;
  }

  .project-title a {
    position: relative;
    z-index: 1;
    color: inherit;
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .project-title a:hover {
    color: var(--color-accent-primary);
  }

  .project-description {
    box-shadow: 0 10px 30px -15px rgba(2, 12, 27, 0.7);
    position: relative;
    z-index: 2;
    padding: 25px;
    border-radius: 4px;
    background-color: var(--color-bg-secondary);
    color: var(--color-text-secondary);
    font-size: 16px;
    line-height: 1.6;
    transition: box-shadow 0.3s ease;
  }

  .project-description:hover {
    box-shadow: 0 20px 30px -15px rgba(2, 12, 27, 0.9);
  }

  .project-description a {
    color: var(--color-accent-primary);
    text-decoration: none;
    position: relative;
    transition: color 0.3s ease;
  }

  .project-description a:hover {
    color: var(--color-accent-secondary);
  }

  .project-description a::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 1px;
    bottom: 0;
    left: 0;
    background-color: var(--color-accent-primary);
    transform: scaleX(0);
    transition: transform 0.3s ease;
  }

  .project-description a:hover::after {
    transform: scaleX(1);
  }

  .project-description p {
    margin: 0;
  }

  .project-tech-list {
    display: flex;
    flex-wrap: wrap;
    position: relative;
    z-index: 2;
    margin: 25px 0 10px;
    padding: 0;
    list-style: none;
    max-width: 95%;
  }

  /* Constrain tech list width on tablet devices to prevent image overlap */
  @media (min-width: 769px) and (max-width: 1080px) {
    .featured-project-odd .project-tech-list {
      max-width: 65%;
    }
    
    .featured-project-even .project-tech-list {
      max-width: 65%;
    }
  }
  @media (min-width: 1081px) and (max-width: 1480px) {
    .featured-project-odd .project-tech-list {
      max-width: 75%;
    }
    
    .featured-project-even .project-tech-list {
      max-width: 75%;
    }
  }

  .project-tech-list li {
    color: var(--color-text-secondary);
    font-family: var(--font-mono), monospace;
    font-size: 13px;
    white-space: nowrap;
  }

  .project-links {
    display: flex;
    align-items: center;
    position: relative;
    margin-top: 10px;
    color: var(--color-text-primary);
  }

  .project-links a {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px;
    color: var(--color-text-primary);
    transition: color 0.3s ease, transform 0.3s ease;
  }

  .project-links a:hover {
    color: var(--color-accent-primary);
    transform: translateY(-3px);
  }

  .project-links svg {
    width: 20px;
    height: 20px;
  }

  .project-links a.external svg {
    width: 22px;
    height: 22px;
    margin-top: -4px;
  }

  /* Project Image */
  .project-image {
    box-shadow: 0 10px 30px -15px rgba(2, 12, 27, 0.7);
    position: relative;
    z-index: 1;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .project-image:hover {
    box-shadow: 0 20px 40px -15px rgba(2, 12, 27, 0.85);
  }

  .project-image a {
    width: 100%;
    height: 100%;
    position: relative;
    z-index: 1;
    border-radius: 4px;
    vertical-align: middle;
    display: block;
  }

  .project-image a::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 3;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    background-color: rgba(100, 60, 180, 0.55);
    mix-blend-mode: normal;
  }

  .project-image:hover a::before {
    background-color: rgba(100, 60, 180, 0.15);
  }

  .img-wrapper {
    border-radius: 4px;
    overflow: hidden;
    min-height: 320px;
  }

  .img {
    border-radius: 4px;
    width: 100%;
    height: 100%;
    min-height: 380px;
    object-fit: cover;
    mix-blend-mode: normal;
    filter: contrast(1.05) brightness(1);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    transform: scale(1);
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }

  .project-image:hover .img {
    filter: contrast(1.08) brightness(1.08) saturate(1.1);
    transform: scale(1.05);
    mix-blend-mode: normal;
  }

  /* Mobile Styles */
  @media (max-width: 768px) {
    .featured-project {
      box-shadow: 0 10px 30px -15px rgba(2, 12, 27, 0.7) !important;
      margin-bottom: 100px !important;
      padding: 0 !important;
      border-radius: 8px;
      overflow: hidden;
      min-height: auto;
      position: relative;
      display: block;
    }

    ul > :last-child .featured-project {
      margin-bottom: 0 !important;
    }

    .featured-project-odd .project-content,
    .featured-project-even .project-content {
      position: relative !important;
      padding: 35px 25px !important;
      text-align: left !important;
      display: flex !important;
      flex-direction: column !important;
      justify-content: flex-start !important;
      align-items: flex-start !important;
      height: auto;
      z-index: 5;
      min-height: auto;
      width: 100%;
    }

    .featured-project-odd .project-image,
    .featured-project-even .project-image {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      z-index: 1 !important;
      opacity: 0.15 !important;
    }

    .project-overline {
      text-align: left !important;
      margin: 10px 0 !important;
      width: 100%;
    }

    .project-title {
      margin: 0 0 20px !important;
      text-align: left !important;
      width: 100%;
    }

    .project-title a {
      position: static;
      text-align: left !important;
    }

    .project-title a::before {
      content: '';
      display: block;
      position: absolute;
      z-index: 0;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .project-description {
      padding: 15px 0 !important;
      background-color: transparent !important;
      box-shadow: none !important;
      text-align: left !important;
      max-width: 100%;
      width: 100%;
    }

    .project-description:hover {
      box-shadow: none !important;
    }

    .project-description p {
      text-align: left !important;
      margin: 0 !important;
    }

    .project-description a {
      display: inline !important;
    }

    .featured-project-odd .project-tech-list,
    .featured-project-even .project-tech-list {
      justify-content: flex-start !important;
      margin: 20px 0 10px !important;
      text-align: left !important;
      width: 100%;
    }

    .featured-project-odd .project-tech-list li,
    .featured-project-even .project-tech-list li {
      margin: 0 10px 8px 0 !important;
      color: var(--color-text-primary) !important;
    }

    .featured-project-odd .project-links,
    .featured-project-even .project-links {
      justify-content: flex-start !important;
      margin: 10px 0 0 !important;
      margin-left: -10px !important;
      width: 100%;
    }

    .project-image a {
      width: 100% !important;
      height: 100% !important;
      display: block !important;
    }

    .project-image a::before {
      display: none !important;
    }

    .img-wrapper {
      width: 100% !important;
      height: 100% !important;
      min-height: 100% !important;
    }

    .img {
      object-fit: cover;
      width: 100%;
      height: 100%;
      min-height: 100%;
      filter: contrast(1.05) brightness(0.7);
      image-rendering: -webkit-optimize-contrast;
      image-rendering: crisp-edges;
    }
  }

  @media (max-width: 480px) {
    .featured-project {
      margin-bottom: 80px !important;
      min-height: auto;
      position: relative;
    }

    .featured-project-odd .project-content,
    .featured-project-even .project-content {
      padding: 30px 20px !important;
      min-height: auto;
      position: relative !important;
      z-index: 5 !important;
    }

    .featured-project-odd .project-image,
    .featured-project-even .project-image {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      z-index: 1 !important;
    }

    .project-description {
      font-size: 15px !important;
      line-height: 1.6 !important;
    }

    .project-title {
      font-size: 22px !important;
    }

    .project-tech-list li {
      font-size: 12px !important;
    }
  }

  @media (max-width: 1080px) {
    .featured-project-odd .project-content {
      grid-column: 5 / -1;
    }

    .featured-project-even .project-content {
      grid-column: 1 / 9;
    }
  }
</style>
