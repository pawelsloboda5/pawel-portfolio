---
/* Import Tailwind (required) */
import "../styles/global.css";
import MobileMenu from "../components/MobileMenu";
import PageLoadAnimation from "../components/PageLoadAnimation";
import SidebarReveal from "../components/SidebarReveal";
import ScrollProgress from "../components/ScrollProgress";
import ScrollHeader from "../components/ScrollHeader";
import { socialLinks } from "../data/links";

/* Optional props so pages can pass title/description if needed */
const {
  title = "Pawel | Portfolio",
  description = "Full-stack engineer building fast, accessible, AI-powered apps.",
} = Astro.props;
---
<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
    <meta name="description" content={description} />

    <!-- Open Graph / Social Media Preview -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/portfolio-logo.png" />
    <meta property="og:image:alt" content="Pawel Sloboda - Full-Stack Software Engineer" />
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content="/portfolio-logo.png" />
    <meta name="twitter:image:alt" content="Pawel Sloboda - Full-Stack Software Engineer" />

    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  </head>
  <body class="h-full bg-[var(--color-bg-primary)] text-[var(--color-text-primary)] antialiased">
    <!-- Skip link for a11y -->
    <a
      href="#main"
      class="fixed left-4 top-4 z-50 -translate-y-24 opacity-0 focus:translate-y-0 focus:opacity-100 transition-all duration-200 px-4 py-2 rounded-md bg-[var(--color-accent-primary)] text-black font-medium"
    >
      Skip to content
    </a>

    <!-- Scroll Progress Indicator -->
    <ScrollProgress client:load />

    <!-- Header / Nav -->
    <ScrollHeader client:load>
      <div class="mx-auto max-w-6xl px-4 sm:px-6 h-20 md:h-16 flex items-center justify-between">
        <!-- Logo with page load animation -->
        <PageLoadAnimation client:load delay={100} variant="slide-down">
          <a href="/" class="font-mono text-[var(--color-accent-primary)] text-2xl md:text-xl font-bold hover:text-[var(--color-accent-secondary)] transition-colors relative z-50">
            <span class="inline-block">&lt;</span>PS<span class="inline-block">/&gt;</span>
          </a>
        </PageLoadAnimation>
        
        <!-- Desktop Navigation with sequential animations -->
        <nav aria-label="Primary navigation" class="hidden md:block">
          <ul class="flex items-center gap-8 text-sm font-medium">
            <PageLoadAnimation client:load delay={200} variant="slide-down">
              <li><a href="#about" class="nav-link relative text-[var(--color-text-secondary)] hover:text-[var(--color-accent-primary)] transition-colors group">
                <span class="relative z-10">About</span>
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[var(--color-accent-primary)] transition-all duration-300 group-hover:w-full"></span>
              </a></li>
            </PageLoadAnimation>
            <PageLoadAnimation client:load delay={300} variant="slide-down">
              <li><a href="#experience" class="nav-link relative text-[var(--color-text-secondary)] hover:text-[var(--color-accent-primary)] transition-colors group">
                <span class="relative z-10">Experience</span>
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[var(--color-accent-primary)] transition-all duration-300 group-hover:w-full"></span>
              </a></li>
            </PageLoadAnimation>
            <PageLoadAnimation client:load delay={400} variant="slide-down">
              <li><a href="#projects" class="nav-link relative text-[var(--color-text-secondary)] hover:text-[var(--color-accent-primary)] transition-colors group">
                <span class="relative z-10">Projects</span>
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[var(--color-accent-primary)] transition-all duration-300 group-hover:w-full"></span>
              </a></li>
            </PageLoadAnimation>
            <PageLoadAnimation client:load delay={500} variant="slide-down">
              <li><a href="#contact" class="nav-link relative text-[var(--color-text-secondary)] hover:text-[var(--color-accent-primary)] transition-colors group">
                <span class="relative z-10">Contact</span>
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[var(--color-accent-primary)] transition-all duration-300 group-hover:w-full"></span>
              </a></li>
            </PageLoadAnimation>
            <PageLoadAnimation client:load delay={600} variant="slide-down">
              <li>
                <a 
                  href={socialLinks.resume}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="border border-[var(--color-accent-primary)] text-[var(--color-accent-primary)] px-4 py-2 rounded-md hover:bg-[var(--color-accent-primary)]/10 transition-all duration-200"
                >
                  Resume
                </a>
              </li>
            </PageLoadAnimation>
          </ul>
        </nav>

        <!-- Mobile Menu -->
        <MobileMenu client:load />
      </div>
    </ScrollHeader>

    <!-- Left Sidebar - Social Links with reveal animation -->
    <SidebarReveal client:load side="left" delay={1400}>
      <aside class="hidden md:flex fixed left-8 bottom-0 flex-col items-center gap-6 z-30" aria-label="Social media links">
      <a href={socialLinks.github} target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="text-[var(--color-text-secondary)] hover:text-[var(--color-accent-primary)] hover:-translate-y-1 transition-all duration-200 cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
      </a>
      <a href={socialLinks.linkedin} target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="text-[var(--color-text-secondary)] hover:text-[var(--color-accent-primary)] hover:-translate-y-1 transition-all duration-200 cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>
      </a>
      <!-- Decorative dots -->
      <div class="flex flex-col gap-2 pt-4 mb-0.5">
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-80"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-70"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-60"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-50"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-40"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-30"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-20"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-10"></div>
      </div>
      </aside>
    </SidebarReveal>

    <!-- Right Sidebar - Email with reveal animation -->
    <SidebarReveal client:load side="right" delay={1400}>
      <aside class="hidden md:flex fixed right-8 bottom-0 flex-col items-center gap-6 z-30" aria-label="Email contact">
      <a 
        href={socialLinks.email}
        class="text-[var(--color-text-secondary)] hover:text-[var(--color-accent-primary)] hover:-translate-y-1 transition-all duration-200 [writing-mode:vertical-rl] text-sm tracking-widest font-mono cursor-pointer"
      >
        {socialLinks.email.replace('mailto:', '')}
      </a>
      <!-- Decorative dots -->
      <div class="flex flex-col gap-2 pt-4 mb-0.5">
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-80"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-70"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-60"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-50"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-40"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-30"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-20"></div>
        <div class="w-1.5 h-1.5 rounded-full bg-[var(--color-accent-primary)] opacity-10"></div>
      </div>
      </aside>
    </SidebarReveal>

    <!-- Main content slot -->
    <main id="main" class="mx-auto max-w-6xl px-6 sm:px-16 md:px-24 lg:px-24 xl:px-12">
      <slot />
    </main>

    <!-- Footer -->
    <footer class="mt-32">
      <div class="mx-auto max-w-6xl px-6 py-8 text-sm text-[var(--color-text-muted)] text-center">
        <p>© {new Date().getFullYear()} Pawel Sloboda. All rights reserved.</p>
      </div>
    </footer>
  </body>
</html>
